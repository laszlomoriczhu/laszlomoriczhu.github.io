<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nyugd√≠j Visszasz√°ml√°l√≥ üéâ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, black 0%, grey 100%);
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 10px;
            touch-action: manipulation;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            text-align: center;
            width: 100%;
            max-width: 420px;
            margin: 0 auto;
            position: relative;
        }

        /* Adventi gyerty√°k a container jobb fels≈ë sark√°ban */
        .advent-candles {
            position: absolute;
            top: 30px;
            right: 15px;
            display: flex;
            gap: 6px;
            z-index: 100;
        }

        .candle {
            width: 18px;
            height: 36px;
            position: relative;
        }

        .candle-body {
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, 
                #f8f9fa 0%, 
                #e9ecef 30%, 
                #ffffff 70%, 
                #f0f0f0 100%);
            border-radius: 4px 4px 2px 2px;
            position: relative;
            box-shadow: 
                inset 0 1px 0 rgba(255,255,255,0.8),
                inset 0 -1px 0 rgba(0,0,0,0.05),
                0 2px 4px rgba(0,0,0,0.1);
        }

        .candle-body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 35px;
            background: linear-gradient(to bottom, #ffd700 0%, #ffa500 100%);
            border-radius: 4px 4px 0 0;
            opacity: 0.7;
        }

        .candle-body::after {
            content: '';
            position: absolute;
            top: 4px;
            left: 2px;
            right: 2px;
            bottom: 4px;
            background: linear-gradient(to right, 
                rgba(255,255,255,0.4) 0%, 
                rgba(255,255,255,0.1) 50%, 
                rgba(255,255,255,0.4) 100%);
            border-radius: 2px;
        }

        .candle-wick {
            position: absolute;
            top: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 8px;
            background: #333;
            border-radius: 1px;
        }

        .flame {
            position: absolute;
            top: -24px;
            left: 50%;
            transform: translateX(-50%);
            width: 10px;
            height: 20px;
            background: linear-gradient(to bottom, 
                #ffff00 0%, 
                #ff9900 50%, 
                #ff3300 100%);
            border-radius: 50% 50% 30% 30%;
            opacity: 0;
            filter: blur(1px);
            box-shadow: 
                0 0 15px #ff9900,
                0 0 30px #ff5500,
                0 0 45px #ff3300;
            animation: flicker 1.2s infinite alternate ease-in-out;
            z-index: 2;
        }

        .flame::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 8px;
            background: #ffffcc;
            border-radius: 50%;
            filter: blur(0.5px);
        }

        .candle.lit .flame {
            opacity: 1;
        }

        .candle.lit .candle-body::before {
            background: linear-gradient(to bottom, #ff6b00 0%, #ff3300 100%);
            opacity: 1;
            box-shadow: 0 0 10px rgba(255,107,0,0.5);
        }

        @keyframes flicker {
            0%, 100% { 
                transform: translateX(-50%) scale(1, 1);
                height: 20px;
            }
            25% { 
                transform: translateX(-50%) scale(1.1, 0.95);
                height: 18px;
            }
            50% { 
                transform: translateX(-50%) scale(0.95, 1.15);
                height: 22px;
            }
            75% { 
                transform: translateX(-50%) scale(1.05, 0.9);
                height: 17px;
            }
        }

        h1 {
            color: #333;
            margin-bottom: 8px;
            font-size: 1.0em;
            font-weight: 600;
            line-height: 1.2;
            
        }

        .subtitle {
            color: #666;
            margin-bottom: 15px;
            font-size: 0.9em;
            line-height: 1.2;
        }

        .progress-container {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 15px;
            margin: 12px 0;
            position: relative;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e9ecef;
            border-radius: 14px;
            overflow: hidden;
            margin: 8px 0 5px 0;
            position: relative;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #44a08d);
            border-radius: 14px;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-percent {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #333;
            font-weight: bold;
            font-size: 16px;
            z-index: 2;
            white-space: nowrap;
            letter-spacing: -0.3px;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 4px;
            font-size: 1em;
            color: #666;
            font-weight: 500;
        }

        .current-progress {
            background: #e8f5e9;
            padding: 8px 10px;
            border-radius: 10px;
            margin-top: 8px;
            font-size: 1em;
            color: #2e7d32;
            font-weight: 500;
        }

        .countdown {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 6px;
            margin: 15px 0;
        }

        .time-unit {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 10px 5px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(255,107,107,0.25);
        }

        .number {
            font-size: 1.5em;
            font-weight: 800;
            display: block;
            line-height: 1.2;
        }

        .label {
            font-size: 0.7em;
            opacity: 0.95;
            margin-top: 2px;
            font-weight: 500;
            letter-spacing: 0.3px;
        }

        .target-date {
            background: #e3f2fd;
            padding: 12px;
            border-radius: 12px;
            margin: 15px 0;
            border: 2px dashed #2196f3;
            font-size: 0.9em;
        }

        .emoji {
            font-size: 2.2em;
            margin-bottom: 8px;
        }

        .highlight {
            color: #ee5a24;
            font-weight: 800;
            font-size: 1.1em;
        }

        .date-big {
            font-size: 1.1em;
            font-weight: 700;
            color: #2196f3;
            display: block;
            margin-top: 3px;
            line-height: 1.3;
        }

        .message {
            margin-top: 15px;
            padding: 12px;
            background: #f9f9f9;
            border-radius: 12px;
            font-size: 0.9em;
            line-height: 1.4;
        }

        /* Samsung Galaxy S21 FE optimaliz√°l√°s */
        @media (max-height: 780px) {
            body {
                padding: 8px;
            }
            
            .container {
                padding: 16px;
            }
            
            h1 {
                font-size: 1.6em;
                margin-bottom: 6px;
                padding-right: 70px;
            }
            
            .subtitle {
                font-size: 0.85em;
                margin-bottom: 12px;
                padding-right: 70px;
            }
            
            .progress-container {
                padding: 10px;
                margin: 8px 0;
            }
            
            .progress-bar {
                height: 24px;
                margin: 6px 0 4px 0;
            }
            
            .progress-percent {
                font-size: 11px;
            }
            
            .countdown {
                gap: 4px;
                margin: 12px 0;
            }
            
            .time-unit {
                padding: 8px 4px;
            }
            
            .number {
                font-size: 1.3em;
            }
            
            .label {
                font-size: 0.65em;
            }
            
            .target-date {
                padding: 10px;
                margin: 12px 0;
            }
            
            .message {
                padding: 10px;
                margin-top: 12px;
            }
            
            /* Gyerty√°k kisebbek */
            .advent-candles {
                top: 12px;
                right: 12px;
                gap: 5px;
            }
            
            .candle {
                width: 16px;
                height: 32px;
            }
            
            .flame {
                top: -20px;
                width: 8px;
                height: 16px;
            }
        }

        @media (max-width: 380px) {
            .advent-candles {
                top: 10px;
                right: 10px;
                gap: 4px;
            }
            
            .candle {
                width: 14px;
                height: 28px;
            }
            
            h1 {
                padding-right: 60px;
                font-size: 1.5em;
            }
            
            .subtitle {
                padding-right: 60px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Adventi gyerty√°k a container jobb fels≈ë sark√°ban -->
        <div class="advent-candles">
            <div class="candle" id="candle1">
                <div class="candle-body"></div>
                <div class="candle-wick"></div>
                <div class="flame"></div>
            </div>
            <div class="candle" id="candle2">
                <div class="candle-body"></div>
                <div class="candle-wick"></div>
                <div class="flame"></div>
            </div>
            <div class="candle" id="candle3">
                <div class="candle-body"></div>
                <div class="candle-wick"></div>
                <div class="flame"></div>
            </div>
            <div class="candle" id="candle4">
                <div class="candle-body"></div>
                <div class="candle-wick"></div>
                <div class="flame"></div>
            </div>
        </div>

        <div class="emoji">üéØ</div>
        
        <div class="progress-container">
            <h3>üìä Eddig teljes√≠tve:</h3>
            <div class="progress-bar">
                <div class="progress" id="progress-bar"></div>
                <div class="progress-percent" id="progress-percent">0.00000000%</div>
            </div>
            <div class="progress-text">
                <span>0 √©v</span>
                <span id="current-progress-short">0 √©v 0 nap</span>
                <span>40 √©v</span>
            </div>
            <div class="current-progress">
                Jelenleg: <span id="current-progress">0 √©v 0 nap</span>
            </div>
        </div>

        <div class="countdown">
            <div class="time-unit">
                <span class="number" id="years">0</span>
                <span class="label">√âV</span>
            </div>
            <div class="time-unit">
                <span class="number" id="days">0</span>
                <span class="label">NAP</span>
            </div>
            <div class="time-unit">
                <span class="number" id="hours">0</span>
                <span class="label">√ìRA</span>
            </div>
            <div class="time-unit">
                <span class="number" id="minutes">0</span>
                <span class="label">PERC</span>
            </div>
            <div class="time-unit">
                <span class="number" id="seconds">0</span>
                <span class="label">MP</span>
            </div>
        </div>

        <div class="target-date">
            <p>üéâ <strong>Becs√ºlt nyugd√≠jba vonul√°s:</strong></p>
            <span class="date-big" id="target-date">-</span>
        </div>

        <div class="message">
            <p>M√°r csak <span class="highlight" id="total-days">0</span> nap van h√°tra!</p>
            <p><strong>M√°r majdnem ott vagy!</strong> üíö</p>
        </div>
    </div>

    <script>
        // ===========================================
        // HELYES LOGIKA - JAV√çTOTT V√ÅLTOZAT
        // ===========================================
        
        // 1. ALAPADATOK
        const startDate = new Date('2023-12-31T00:00:00'); // Amikor 36 √©v 118 nap volt meg
        const startDaysCompleted = (36 * 365) + 118; // 36 √©v + 118 nap = 13,258 nap
        const totalDaysRequired = 40 * 365; // 40 √©v = 14,600 nap
        
        // 2. H√ÅTRAL√âV≈ê NAPOK A 40 √âVHEZ (2023.12.31-t≈ël sz√°molva)
        const daysNeededFrom2023 = totalDaysRequired - startDaysCompleted; // 14,600 - 13,258 = 1,342 nap
        
        // 3. C√âLD√ÅTUM: 2023.12.31 + 1,342 nap
        function calculateTargetDate() {
            const targetDate = new Date(startDate);
            // 1,342 nap = 3 √©v + 247 nap (365*3 + 247 = 1,342)
            targetDate.setDate(targetDate.getDate() + daysNeededFrom2023);
            return targetDate;
        }

        // 4. JELENLEGI √ÅLLAPOT SZ√ÅM√çT√ÅSA
        function calculateCurrentProgress() {
            const now = new Date();
            
            // Mennyi id≈ë telt el 2023.12.31 √≥ta (napokban, tizedesjegy pontosan!)
            const elapsedMs = now - startDate;
            const elapsedDays = elapsedMs / (1000 * 60 * 60 * 24); // TIZEDES sz√°m!
            
            // Jelenleg teljes√≠tett napok (pontosan)
            const currentTotalDays = startDaysCompleted + elapsedDays;
            
            // Sz√°zal√©k sz√°m√≠t√°s 8 tizedesjegyre
            const progressPercent = (currentTotalDays / totalDaysRequired) * 100;
            
            // √âvek √©s napok sz√°m√≠t√°sa a teljes√≠tm√©nyhez
            const currentYears = Math.floor(currentTotalDays / 365);
            const currentRemainingDays = Math.floor(currentTotalDays % 365);
            
            return {
                percent: progressPercent,
                totalDays: currentTotalDays,
                years: currentYears,
                days: currentRemainingDays,
                elapsedDays: elapsedDays
            };
        }

        // 5. VISSZASZ√ÅML√ÅL√ì A C√âLD√ÅTUMIG
        function calculateTimeLeft() {
            const targetDate = calculateTargetDate();
            const now = new Date();
            const timeLeftMs = targetDate - now;
            
            if (timeLeftMs <= 0) {
                return { 
                    years: 0, 
                    days: 0, 
                    hours: 0, 
                    minutes: 0, 
                    seconds: 0, 
                    totalDays: 0
                };
            }
            
            // Teljes napok
            const totalDays = Math.floor(timeLeftMs / (1000 * 60 * 60 * 24));
            
            // √âvek √©s napok
            const years = Math.floor(totalDays / 365);
            const days = totalDays % 365;
            
            // √ìr√°k, percek, m√°sodpercek
            const hours = Math.floor((timeLeftMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeftMs % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeftMs % (1000 * 60)) / 1000);
            
            return {
                years: years,
                days: days,
                hours: hours,
                minutes: minutes,
                seconds: seconds,
                totalDays: totalDays
            };
        }

        // 6. ADVENTI GYERTY√ÅK SZ√ÅM√çT√ÅSA
        function updateAdventCandles() {
            const now = new Date();
            const currentYear = now.getFullYear();
            
            // 2025-√∂s advent d√°tumai (1. advent vas√°rnap: november 30.)
            const adventDates = [
                new Date(currentYear, 10, 30), // 1. advent: nov 30.
                new Date(currentYear, 11, 7),  // 2. advent: dec 7.
                new Date(currentYear, 11, 14), // 3. advent: dec 14.
                new Date(currentYear, 11, 21)  // 4. advent: dec 21.
            ];
            
            // H√°nyadik adventi h√©ten vagyunk?
            let litCandles = 0;
            for (let i = 0; i < adventDates.length; i++) {
                if (now >= adventDates[i]) {
                    litCandles = i + 1;
                }
            }
            
            // Gyerty√°k friss√≠t√©se
            for (let i = 1; i <= 4; i++) {
                const candle = document.getElementById(`candle${i}`);
                if (i <= litCandles) {
                    candle.classList.add('lit');
                } else {
                    candle.classList.remove('lit');
                }
            }
        }

        // 7. MINDEN FRISS√çT√âSE
        function updateAllDisplays() {
            // Progress friss√≠t√©se
            const progress = calculateCurrentProgress();
            const progressPercentValue = Math.min(progress.percent, 100);
            
            // Progress bar
            document.getElementById('progress-bar').style.width = progressPercentValue + '%';
            
            // Sz√°zal√©k 8 tizedesjeggyel a progress bar k√∂zep√©n
            document.getElementById('progress-percent').textContent = 
                progressPercentValue.toFixed(7) + '%';
            
            // Jelenlegi √°llapot sz√∂vegesen
            document.getElementById('current-progress').textContent = 
                `${progress.years} √©v ${progress.days} nap`;
            document.getElementById('current-progress-short').textContent = 
                `${progress.years} √©v ${progress.days} nap`;
            
            // Visszasz√°ml√°l√≥ friss√≠t√©se
            const timeLeft = calculateTimeLeft();
            
            document.getElementById('years').textContent = timeLeft.years;
            document.getElementById('days').textContent = timeLeft.days;
            document.getElementById('hours').textContent = timeLeft.hours.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = timeLeft.minutes.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = timeLeft.seconds.toString().padStart(2, '0');
            document.getElementById('total-days').textContent = timeLeft.totalDays.toLocaleString();
            
            // C√©ld√°tum megjelen√≠t√©se
            const targetDate = calculateTargetDate();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('target-date').textContent = targetDate.toLocaleDateString('hu-HU', options);
            
            // Adventi gyerty√°k friss√≠t√©se
            updateAdventCandles();
            
            // Ha m√°r nyugd√≠jas
            if (timeLeft.totalDays <= 0) {
                document.getElementById('target-date').textContent = 'M√°r nyugd√≠jas! üéâ';
                document.getElementById('progress-bar').style.width = '100%';
                document.getElementById('progress-percent').textContent = '100.00000000%';
            }
        }

        // 8. INICIALIZ√ÅL√ÅS √âS FRISS√çT√âS
        updateAllDisplays(); // Azonnali friss√≠t√©s
        setInterval(updateAllDisplays, 1000); // M√°sodpercenk√©nti friss√≠t√©s

        // 9. MOBIL OPTIMALIZ√ÅL√ÅS
        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });
        
        document.addEventListener('touchstart', function() {}, {passive: true});
    </script>
</body>
</html>