<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter #1 - English Lesson with AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f8fafc;
            --text-color: #1e293b;
            --card-bg: #ffffff;
            --accent-color: #6366f1;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        [data-theme="dark"] {
            --bg-color: #0f172a;
            --text-color: #f1f5f9;
            --card-bg: #1e293b;
            --accent-color: #818cf8;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; transition: 0.3s; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-color); padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        header { width: 100%; max-width: 800px; display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem; margin-top: 1rem; }
        .back-btn { text-decoration: none; color: var(--accent-color); font-size: 1.5rem; font-weight: bold; padding: 5px 10px; }
        .theme-toggle { background: var(--card-bg); border: 1px solid var(--accent-color); color: var(--text-color); padding: 5px 15px; border-radius: 20px; cursor: pointer; font-size: 0.8rem; }

        .title-section { text-align: center; margin-bottom: 2rem; }
        .subtitle { font-size: 1.2rem; opacity: 0.6; font-weight: 300; }

        .container { width: 100%; max-width: 800px; }
        
        /* Accordion Style */
        .accordion { margin-bottom: 12px; border-radius: 12px; overflow: hidden; box-shadow: var(--shadow); background: var(--card-bg); border: 1px solid rgba(0,0,0,0.05); }
        .accordion-header { padding: 18px 20px; background: var(--card-bg); cursor: pointer; display: flex; justify-content: space-between; font-weight: 600; }
        .accordion-content { padding: 0; max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .accordion.active .accordion-content { padding: 20px; max-height: 3000px; border-top: 1px solid rgba(0,0,0,0.05); }

        .video-link-box { text-align: center; padding: 20px; border: 2px dashed var(--accent-color); border-radius: 12px; }
        .yt-button { display: inline-block; background: #ff0000; color: white; text-decoration: none; padding: 12px 24px; border-radius: 8px; font-weight: bold; margin-top: 10px; }

        .dual-text { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; }
        .lang-label { font-weight: bold; color: var(--accent-color); display: block; margin-bottom: 10px; text-transform: uppercase; font-size: 0.8rem; }

        .expression-list { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .expression-item { padding: 10px; border-bottom: 1px solid rgba(0,0,0,0.05); font-size: 0.95rem; }

        .btn-action { background: var(--accent-color); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; margin: 10px 5px; font-weight: 600; font-family: 'Inter'; }
        .btn-action:disabled { opacity: 0.3; cursor: not-allowed; }
        #stop-btn { background: #ef4444; }

        #display-area { font-size: 1.6rem; text-align: center; margin: 25px 0; min-height: 60px; font-weight: 600; color: var(--accent-color); padding: 20px; border-radius: 12px; background: rgba(99, 102, 241, 0.05); }
        
        .test-item { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid rgba(0,0,0,0.05); }
        .options-group { display: flex; flex-direction: column; gap: 8px; margin-top: 12px; }
        .options-group label { background: rgba(0,0,0,0.02); padding: 10px; border-radius: 6px; cursor: pointer; }
        [data-theme="dark"] .options-group label { background: rgba(255,255,255,0.05); }

        #result-msg { font-size: 1.4rem; font-weight: bold; margin-top: 20px; text-align: center; padding: 15px; border-radius: 12px; }

        @media (max-width: 600px) { .dual-text { grid-template-columns: 1fr; } .expression-list { grid-template-columns: 1fr 1fr; } }
    </style>
</head>
<body>

    <header>
        <a href="ELWAI.html" class="back-btn">‚Üê</a>
        <button class="theme-toggle" id="theme-btn">Dark Mode</button>
    </header>

    <div class="title-section">
        <h1>Chapter #1</h1>
        <p class="subtitle">Bean</p>
    </div>

    <div class="container">
        <div class="accordion">
            <div class="accordion-header">1. Video <span>‚ñº</span></div>
            <div class="accordion-content">
                <div class="video-link-box">
                    <p>The video player is restricted for this content.</p>
                    <a href="https://www.youtube.com/watch?v=Decj0Q4a4U4" target="_blank" class="yt-button">Watch on YouTube</a>
                </div>
            </div>
        </div>

        <div class="accordion">
            <div class="accordion-header">2. Text <span>‚ñº</span></div>
            <div class="accordion-content">
                <div class="dual-text">
                    <div>
                        <span class="lang-label">English</span>
                        "The thing I find most tricky is when people half recognize you. A few years ago, I was in a Land Rover parts department. This guy came up to me and said: 'Excuse me, has anyone ever told you that you're the absolute spitting image of that Mr. Bean?' I said: 'Well, actually I am the actor who plays Mr. Bean.' And he said: 'Bet you wish you were!' It was a bizarre conversation. He even suggested I should do look-alike work because I could make a fortune."
                    </div>
                    <div>
                        <span class="lang-label">Hungarian</span>
                        "Azt tal√°lom a legtr√ºkk√∂sebbnek, amikor az emberek csak f√©lig ismernek fel. P√°r √©ve egy Land Rover alkatr√©szoszt√°lyon voltam. Egy fick√≥ odaj√∂tt hozz√°m √©s azt mondta: 'Eln√©z√©st, mondta m√°r valaki, hogy maga a kik√∂p√∂tt m√°sa annak a Mr. Beannek?' Mondtam: 'Nos, tulajdonk√©ppen √©n vagyok a sz√≠n√©sz, aki Mr. Beant j√°tssza.' ≈ê pedig azt felelte: 'Fogadom, b√°rcsak az lenn√©l!' Bizarr besz√©lget√©s volt. M√©g azt is javasolta, hogy legyek hasonm√°s, mert vagyont kereshetn√©k vele."
                    </div>
                </div>
            </div>
        </div>

        <div class="accordion">
            <div class="accordion-header">3. Key Expressions <span>‚ñº</span></div>
            <div class="accordion-content">
                <div class="expression-list" id="expression-list"></div>
            </div>
        </div>

        <div class="accordion" id="exercises-section">
            <div class="accordion-header">4. Exercises <span>‚ñº</span></div>
            <div class="accordion-content" style="text-align: center;">
                <p>Listen and learn. New word every 5 seconds.</p>
                <div id="display-area">Ready?</div>
                <button class="btn-action" id="play-btn">Play</button>
                <button class="btn-action" id="stop-btn">Stop</button>
            </div>
        </div>

        <div class="accordion">
            <div class="accordion-header">5. Test <span>‚ñº</span></div>
            <div class="accordion-content">
                <div style="text-align: center;">
                    <button class="btn-action" id="start-test-btn">Start New Test</button>
                </div>
                <div id="test-container"></div>
                <div style="text-align: center;">
                    <button class="btn-action" id="result-btn" style="display:none">Show Result</button>
                </div>
                <div id="result-msg"></div>
            </div>
        </div>
    </div>

    <script>
        const expressions = [
            {en: "Tricky", hu: "Tr√ºkk√∂s / Fog√≥s"}, {en: "Recognize", hu: "Felismer"},
            {en: "Spitting image", hu: "Kik√∂p√∂tt m√°sa"}, {en: "Actually", hu: "Tulajdonk√©ppen"},
            {en: "Bizarre", hu: "Bizarr / Furcsa"}, {en: "Make a fortune", hu: "Vagyont keresni"},
            {en: "Look-alike", hu: "Hasonm√°s"}, {en: "Parts department", hu: "Alkatr√©sz oszt√°ly"},
            {en: "Suggest", hu: "Javasol"}, {en: "Conversation", hu: "Besz√©lget√©s"},
            {en: "Absolute", hu: "Teljes / Abszol√∫t"}, {en: "Actor", hu: "Sz√≠n√©sz"},
            {en: "Play a role", hu: "Szerepet j√°tszik"}, {en: "Bet you wish", hu: "Fogadom, b√°rcsak"},
            {en: "Wait for", hu: "V√°r valamire"}, {en: "Warehouse", hu: "Rakt√°r"},
            {en: "Forever", hu: "√ñr√∂kk√©"}, {en: "Standing around", hu: "√Åldog√°lni"},
            {en: "Spoken to", hu: "Besz√©lni valakivel"}, {en: "Annoyed", hu: "Bossz√∫s"},
            {en: "Claim", hu: "√Åll√≠t valamit"}, {en: "Resemble", hu: "Hasonl√≠t"},
            {en: "Stare at", hu: "B√°mul valakit"}, {en: "Brings it back", hu: "Visszahozza"},
            {en: "Total ass", hu: "Teljes s**g / h√ºlye"}
        ];

        // Fill Expressions
        const listDiv = document.getElementById('expression-list');
        expressions.forEach(item => {
            listDiv.innerHTML += `<div class="expression-item"><strong>${item.en}</strong></div><div class="expression-item">${item.hu}</div>`;
        });

        // Accordion Logic
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                const parent = header.parentElement;
                const isActive = parent.classList.contains('active');
                
                // Close others
                document.querySelectorAll('.accordion').forEach(acc => acc.classList.remove('active'));
                
                if (!isActive) {
                    parent.classList.add('active');
                } else if (parent.id === 'exercises-section') {
                    stopTrainer();
                }
            });
        });

        // Trainer (Exercise 4)
        let trainerInterval;
        const displayArea = document.getElementById('display-area');
        
        function speak(text) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'en-US';
            msg.rate = 0.9;
            window.speechSynthesis.speak(msg);
        }

        document.getElementById('play-btn').addEventListener('click', () => {
            stopTrainer();
            const run = () => {
                const random = expressions[Math.floor(Math.random() * expressions.length)];
                displayArea.innerHTML = `${random.en}<br><small style="font-size:1rem; opacity:0.6">${random.hu}</small>`;
                speak(random.en);
            };
            run();
            trainerInterval = setInterval(run, 5000);
        });

        function stopTrainer() { clearInterval(trainerInterval); displayArea.innerText = "Paused"; window.speechSynthesis.cancel(); }
        document.getElementById('stop-btn').addEventListener('click', stopTrainer);

        // Test (Exercise 5)
        const testContainer = document.getElementById('test-container');
        const resultBtn = document.getElementById('result-btn');
        const resultMsg = document.getElementById('result-msg');

        document.getElementById('start-test-btn').addEventListener('click', () => {
            testContainer.innerHTML = '';
            resultMsg.innerText = '';
            resultMsg.style.background = 'none';
            resultBtn.style.display = 'inline-block';
            
            const shuffled = [...expressions].sort(() => 0.5 - Math.random()).slice(0, 5);
            
            shuffled.forEach((q, idx) => {
                const options = [q.en];
                while(options.length < 3) {
                    const fake = expressions[Math.floor(Math.random() * expressions.length)].en;
                    if(!options.includes(fake)) options.push(fake);
                }
                options.sort();

                const qDiv = document.createElement('div');
                qDiv.className = 'test-item';
                qDiv.innerHTML = `<p>${idx+1}. What does it mean: <strong>${q.hu}</strong>?</p>
                    <div class="options-group">
                        ${options.map(opt => `<label><input type="radio" name="q${idx}" value="${opt}" onchange="checkCompletion()"> ${opt}</label>`).join('')}
                    </div>`;
                qDiv.dataset.correct = q.en;
                testContainer.appendChild(qDiv);
            });
            checkCompletion();
        });

        function checkCompletion() {
            const answered = document.querySelectorAll('input[type="radio"]:checked').length;
            resultBtn.disabled = (answered < 5);
        }

        resultBtn.addEventListener('click', () => {
            let score = 0;
            document.querySelectorAll('.test-item').forEach(item => {
                const selected = item.querySelector('input:checked')?.value;
                if(selected === item.dataset.correct) score++;
            });

            let emoji = "üòï";
            let color = "#fee2e2";
            let textColor = "#991b1b";

            if(score === 5) { emoji = "üèÜ Perfect!"; color = "#dcfce7"; textColor = "#166534"; }
            else if(score >= 3) { emoji = "üôÇ Good job!"; color = "#fef9c3"; textColor = "#854d0e"; }
            
            resultMsg.innerHTML = `${emoji} <br> Your Result: ${score} / 5`;
            resultMsg.style.background = color;
            resultMsg.style.color = textColor;
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        });

        // Dark Mode
        const themeBtn = document.getElementById('theme-btn');
        themeBtn.addEventListener('click', () => {
            const isDark = document.documentElement.hasAttribute('data-theme');
            document.documentElement.toggleAttribute('data-theme');
            themeBtn.innerText = isDark ? 'Dark Mode' : 'Light Mode';
        });
    </script>
</body>
</html>