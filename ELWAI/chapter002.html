<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter #2 - English Lesson with AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f8fafc;
            --text-color: #1e293b;
            --card-bg: #ffffff;
            --accent-color: #ec4899; /* Jennifer Aniston / Ellen st√≠lushoz ill≈ë r√≥zsasz√≠nesebb t√≥nus */
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        [data-theme="dark"] {
            --bg-color: #0f172a;
            --text-color: #f1f5f9;
            --card-bg: #1e293b;
            --accent-color: #f472b6;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; transition: 0.3s; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-color); padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        header { width: 100%; max-width: 800px; display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem; margin-top: 1rem; }
        .back-btn { text-decoration: none; color: var(--accent-color); font-size: 1.5rem; font-weight: bold; padding: 5px 10px; }
        .theme-toggle { background: var(--card-bg); border: 1px solid var(--accent-color); color: var(--text-color); padding: 5px 15px; border-radius: 20px; cursor: pointer; font-size: 0.8rem; }

        .title-section { text-align: center; margin-bottom: 2rem; }
        .subtitle { font-size: 1.2rem; opacity: 0.6; font-weight: 300; }

        .container { width: 100%; max-width: 800px; }
        
        .accordion { margin-bottom: 12px; border-radius: 12px; overflow: hidden; box-shadow: var(--shadow); background: var(--card-bg); border: 1px solid rgba(0,0,0,0.05); }
        .accordion-header { padding: 18px 20px; background: var(--card-bg); cursor: pointer; display: flex; justify-content: space-between; font-weight: 600; }
        .accordion-content { padding: 0; max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .accordion.active .accordion-content { padding: 20px; max-height: 3000px; border-top: 1px solid rgba(0,0,0,0.05); }

        .video-link-box { text-align: center; padding: 20px; border: 2px dashed var(--accent-color); border-radius: 12px; }
        .yt-button { display: inline-block; background: #ff0000; color: white; text-decoration: none; padding: 12px 24px; border-radius: 8px; font-weight: bold; margin-top: 10px; }

        .dual-text { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; }
        .lang-label { font-weight: bold; color: var(--accent-color); display: block; margin-bottom: 10px; text-transform: uppercase; font-size: 0.8rem; }

        .expression-list { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .expression-item { padding: 10px; border-bottom: 1px solid rgba(0,0,0,0.05); font-size: 0.95rem; }

        .btn-action { background: var(--accent-color); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; margin: 10px 5px; font-weight: 600; font-family: 'Inter'; }
        .btn-action:disabled { opacity: 0.3; cursor: not-allowed; }
        #stop-btn { background: #64748b; }

        #display-area { font-size: 1.6rem; text-align: center; margin: 25px 0; min-height: 60px; font-weight: 600; color: var(--accent-color); padding: 20px; border-radius: 12px; background: rgba(236, 72, 153, 0.05); }
        
        .test-item { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid rgba(0,0,0,0.05); }
        .options-group { display: flex; flex-direction: column; gap: 8px; margin-top: 12px; }
        .options-group label { background: rgba(0,0,0,0.02); padding: 10px; border-radius: 6px; cursor: pointer; }

        #result-msg { font-size: 1.4rem; font-weight: bold; margin-top: 20px; text-align: center; padding: 15px; border-radius: 12px; }

        @media (max-width: 600px) { .dual-text { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <header>
        <a href="ELWAI.html" class="back-btn">‚Üê</a>
        <button class="theme-toggle" id="theme-btn">Dark Mode</button>
    </header>

    <div class="title-section">
        <h1>Chapter #2</h1>
        <p class="subtitle">Jennifer Aniston</p>
    </div>

    <div class="container">
        <div class="accordion">
            <div class="accordion-header">1. Video <span>‚ñº</span></div>
            <div class="accordion-content">
                <div class="video-link-box">
                    <p>Learn English with Jennifer Aniston and Ellen.</p>
                    <a href="https://www.youtube.com/watch?v=dgoqW3Hng2w" target="_blank" class="yt-button">Watch on YouTube</a>
                </div>
            </div>
        </div>

        <div class="accordion">
            <div class="accordion-header">2. Text <span>‚ñº</span></div>
            <div class="accordion-content">
                <div class="dual-text">
                    <div>
                        <span class="lang-label">English</span>
                        "We're going to play a game. You don't want to know what's going to happen, it's boring to know. We're going to show you the lips of co-stars, these are guys you've worked with and you've kissed all of these people! You should recognize the lips, I hope. It's been a long time. They look like a different kind of pose, a strange angle."
                    </div>
                    <div>
                        <span class="lang-label">Hungarian</span>
                        "J√°tszani fogunk egy j√°t√©kot. Nem akarod tudni, mi fog t√∂rt√©nni, unalmas tudni. Meg fogjuk mutatni neked a sz√≠n√©szt√°rsaid ajkait, ezek olyan sr√°cok, akikkel dolgozt√°l √©s akiket mind megcs√≥kolt√°l! Fel kellene ismerned az ajkaikat, rem√©lem. M√°r hossz√∫ id≈ë telt el. M√°sfajta p√≥znak t≈±nnek, egy furcsa sz√∂gnek."
                    </div>
                </div>
            </div>
        </div>

        <div class="accordion">
            <div class="accordion-header">3. Key Expressions <span>‚ñº</span></div>
            <div class="accordion-content">
                <div class="expression-list" id="expression-list"></div>
            </div>
        </div>

        <div class="accordion" id="exercises-section">
            <div class="accordion-header">4. Exercises <span>‚ñº</span></div>
            <div class="accordion-content" style="text-align: center;">
                <p>Listen and learn. New word every 5 seconds.</p>
                <div id="display-area">Ready?</div>
                <button class="btn-action" id="play-btn">Play</button>
                <button class="btn-action" id="stop-btn">Stop</button>
            </div>
        </div>

        <div class="accordion">
            <div class="accordion-header">5. Test <span>‚ñº</span></div>
            <div class="accordion-content">
                <div style="text-align: center;">
                    <button class="btn-action" id="start-test-btn">Start New Test</button>
                </div>
                <div id="test-container"></div>
                <div style="text-align: center;">
                    <button class="btn-action" id="result-btn" style="display:none">Show Result</button>
                </div>
                <div id="result-msg"></div>
            </div>
        </div>
    </div>

    <script>
        const expressions = [
            {en: "Co-star", hu: "Sz√≠n√©szt√°rs"}, {en: "Recognize", hu: "Felismer"},
            {en: "Cheating", hu: "Csal√°s"}, {en: "Nervous", hu: "Idegess√© v√°lik"},
            {en: "Boring", hu: "Unalmas"}, {en: "Lips", hu: "Ajkak"},
            {en: "Guess", hu: "Kital√°l / Megtippel"}, {en: "Pose", hu: "P√≥z / Be√°ll√°s"},
            {en: "Strange angle", hu: "Furcsa sz√∂g"}, {en: "Wipe it out", hu: "Kit√∂r√∂l / Elt√ºntet"},
            {en: "Hard one", hu: "Neh√©z (feladat/k√©rd√©s)"}, {en: "Help her", hu: "Seg√≠ts neki (n≈ënek)"},
            {en: "Kissed", hu: "Megcs√≥kolta"}, {en: "Work with", hu: "Egy√ºtt dolgozni valakivel"},
            {en: "It's been a long time", hu: "Hossz√∫ id≈ë telt el"}, {en: "Right away", hu: "Azonnal"},
            {en: "Doesn't seem like it", hu: "Nem √∫gy t≈±nik"}, {en: "Different kind", hu: "M√°smilyen"},
            {en: "Lord", hu: "Uram / Istenem"}, {en: "Snore", hu: "Horkol (√°tvitt: unalmas)"},
            {en: "Area", hu: "Ter√ºlet / R√©sz"}, {en: "Hot", hu: "Melege van"},
            {en: "Bizarre", hu: "Bizarr / Furcsa"}, {en: "Wipe", hu: "T√∂r√∂l"},
            {en: "Point", hu: "Pont / Szempont"}
        ];

        // List kit√∂lt√©se
        const listDiv = document.getElementById('expression-list');
        expressions.forEach(item => {
            listDiv.innerHTML += `<div class="expression-item"><strong>${item.en}</strong></div><div class="expression-item">${item.hu}</div>`;
        });

        // Accordion logika
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                const parent = header.parentElement;
                const isActive = parent.classList.contains('active');
                document.querySelectorAll('.accordion').forEach(acc => acc.classList.remove('active'));
                if (!isActive) parent.classList.add('active');
                else if (parent.id === 'exercises-section') stopTrainer();
            });
        });

        // Trainer (Exercise 4)
        let trainerInterval;
        const displayArea = document.getElementById('display-area');
        function speak(text) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'en-US';
            msg.rate = 0.9;
            window.speechSynthesis.speak(msg);
        }

        document.getElementById('play-btn').addEventListener('click', () => {
            stopTrainer();
            const run = () => {
                const random = expressions[Math.floor(Math.random() * expressions.length)];
                displayArea.innerHTML = `${random.en}<br><small style="font-size:1rem; opacity:0.6">${random.hu}</small>`;
                speak(random.en);
            };
            run();
            trainerInterval = setInterval(run, 5000);
        });

        function stopTrainer() { clearInterval(trainerInterval); displayArea.innerText = "Paused"; window.speechSynthesis.cancel(); }
        document.getElementById('stop-btn').addEventListener('click', stopTrainer);

        // Test (Exercise 5)
        const testContainer = document.getElementById('test-container');
        const resultBtn = document.getElementById('result-btn');
        const resultMsg = document.getElementById('result-msg');

        document.getElementById('start-test-btn').addEventListener('click', () => {
            testContainer.innerHTML = '';
            resultMsg.innerText = '';
            resultMsg.style.background = 'none';
            resultBtn.style.display = 'inline-block';
            const shuffled = [...expressions].sort(() => 0.5 - Math.random()).slice(0, 5);
            shuffled.forEach((q, idx) => {
                const options = [q.en];
                while(options.length < 3) {
                    const fake = expressions[Math.floor(Math.random() * expressions.length)].en;
                    if(!options.includes(fake)) options.push(fake);
                }
                options.sort();
                const qDiv = document.createElement('div');
                qDiv.className = 'test-item';
                qDiv.innerHTML = `<p>${idx+1}. What does it mean: <strong>${q.hu}</strong>?</p>
                    <div class="options-group">
                        ${options.map(opt => `<label><input type="radio" name="q${idx}" value="${opt}" onchange="checkCompletion()"> ${opt}</label>`).join('')}
                    </div>`;
                qDiv.dataset.correct = q.en;
                testContainer.appendChild(qDiv);
            });
            checkCompletion();
        });

        function checkCompletion() {
            const answered = document.querySelectorAll('input[type="radio"]:checked').length;
            resultBtn.disabled = (answered < 5);
        }

        resultBtn.addEventListener('click', () => {
            let score = 0;
            document.querySelectorAll('.test-item').forEach(item => {
                const selected = item.querySelector('input:checked')?.value;
                if(selected === item.dataset.correct) score++;
            });
            let emoji = "üòï Try again!";
            let color = "#fee2e2";
            let textColor = "#991b1b";
            if(score === 5) { emoji = "üèÜ Perfect!"; color = "#dcfce7"; textColor = "#166534"; }
            else if(score >= 3) { emoji = "üôÇ Well done!"; color = "#fef9c3"; textColor = "#854d0e"; }
            resultMsg.innerHTML = `${emoji} <br> Your Result: ${score} / 5`;
            resultMsg.style.background = color;
            resultMsg.style.color = textColor;
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        });

        // Dark Mode
        const themeBtn = document.getElementById('theme-btn');
        themeBtn.addEventListener('click', () => {
            const isDark = document.documentElement.hasAttribute('data-theme');
            document.documentElement.toggleAttribute('data-theme');
            themeBtn.innerText = isDark ? 'Dark Mode' : 'Light Mode';
        });
    </script>
</body>
</html>